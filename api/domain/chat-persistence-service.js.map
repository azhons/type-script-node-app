{"version":3,"file":"chat-persistence-service.js","sourceRoot":"","sources":["chat-persistence-service.ts"],"names":["Service","Service.constructor","Service.listenForNews","Service.addMessage","Service.readMessagesAfter","Service.getMessagesKey","Service.getCounterKey","Service.connectSubscriber","Context","Context.constructor","Context.getKey","createChatService"],"mappings":"AAIA,IAAI,IAAI,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,EAAE,YAAY,EAAE,iBAAiB,EAAE,CAAC;AAE5E,IAAa,OAAO;IAKhBA,SALSA,OAAOA,CAMJA,KAAYA,EACZA,iBAAmCA,EACnCA,OAAgBA;QAFhBC,UAAKA,GAALA,KAAKA,CAAOA;QACZA,sBAAiBA,GAAjBA,iBAAiBA,CAAkBA;QACnCA,YAAOA,GAAPA,OAAOA,CAASA;IAE5BA,CAACA;IAEDD,+BAAaA,GAAbA,UAAcA,OAAiBA;QAE3BE,IAAIA,CAACA,WAAWA,GAAGA,OAAOA,CAACA;QAC3BA,CAACA,IAAIA,CAACA,UAAUA,IAAIA,IAAIA,CAACA,iBAAiBA,EAAEA,CAACA;IACjDA,CAACA;IAEDF,4BAAUA,GAAVA,UAAWA,OAA4BA;QAAvCG,iBAeCA;QAbGA,IAAIA,IAAIA,GAAGA,CAACA,IAAIA,IAAIA,EAAEA,CAACA,CAACA,OAAOA,EAAEA,CAACA;QAElCA,MAAMA,CAACA,IAAIA,CAACA,KAAKA,CAACA,SAASA,CAACA,IAAIA,CAACA,aAAaA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAAA,OAAOA;YAC1DA,IAAIA,YAAYA,GAAiBA;gBAC7BA,CAACA,EAAEA,OAAOA;gBACVA,CAACA,EAAEA,OAAOA,CAACA,MAAMA;gBACjBA,CAACA,EAAEA,OAAOA,CAACA,IAAIA;gBACfA,CAACA,EAAEA,IAAIA;aACVA,CAACA;YAEFA,MAAMA,CAACA,KAAIA,CAACA,KAAKA,CAACA,SAASA,CAACA,KAAIA,CAACA,cAAcA,EAAEA,EAAEA,OAAOA,EAAEA,IAAIA,CAACA,SAASA,CAACA,YAAYA,CAACA,CAACA,CACpFA,IAAIA,CAACA,cAAMA,cAAOA,EAAPA,CAAOA,CAACA,CAACA;QAC7BA,CAACA,CAACA,CAACA;IACPA,CAACA;IAEDH,mCAAiBA,GAAjBA,UAAkBA,OAAeA;QAE7BI,IAAIA,WAAWA,GAAGA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,EAAEA,GAAGA,IAAIA,CAACA,QAAQA,CAACA;QACxDA,IAAIA,GAAGA,GAAGA,EAAEA,GAAGA,OAAOA,CAACA;QACvBA,IAAIA,GAAGA,GAAGA,MAAMA,CAACA;QAEjBA,MAAMA,CAACA,IAAIA,CAACA,KAAKA,CAACA,qBAAqBA,CAACA,WAAWA,EAAEA,GAAGA,EAAEA,GAAGA,CAACA,CAACA,IAAIA,CAACA,UAAAA,OAAOA;YACvEA,MAAMA,CAACA,OAAOA,CAACA,GAAGA,CAACA,UAAAA,CAACA;gBAChBA,IAAIA,CAACA,GAAiBA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,CAACA;gBAEpCA,MAAMA,CAAsBA;oBACxBA,MAAMA,EAAEA,CAACA,CAACA,CAACA;oBACXA,OAAOA,EAAEA,CAACA,CAACA,CAACA;oBACZA,IAAIA,EAAEA,CAACA,CAACA,CAACA;oBACTA,IAAIA,EAAEA,CAACA,CAACA,CAACA;iBACZA,CAACA;YACNA,CAACA,CAACA,CAAAA;QACNA,CAACA,CAACA,CAACA,IAAIA,CAACA,UAAAA,OAAOA;YACXA,EAAEA,CAACA,CAACA,OAAOA,CAACA,MAAMA,IAAIA,OAAOA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,CAACA,CAACA,OAAOA,KAAKA,OAAOA,CAACA,CACtEA,CAACA;gBAEGA,AADAA,mFAAmFA;gBACnFA,OAAOA,CAACA,MAAMA,CAACA,OAAOA,CAACA,MAAMA,GAAGA,CAACA,EAAEA,CAACA,CAACA,CAACA;YAC1CA,CAACA;YAEDA,MAAMA,CAACA,OAAOA,CAACA;QACnBA,CAACA,CAACA,CAACA;IACPA,CAACA;IAEOJ,gCAAcA,GAAtBA;QAA2BK,MAAMA,CAACA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,EAAEA,GAAGA,IAAIA,CAACA,QAAQA,CAACA;IAACA,CAACA;IAElEL,+BAAaA,GAArBA;QAA0BM,MAAMA,CAACA,IAAIA,CAACA,OAAOA,CAACA,MAAMA,EAAEA,GAAGA,IAAIA,CAACA,OAAOA,CAACA;IAACA,CAACA;IAEhEN,mCAAiBA,GAAzBA;QAAAO,iBAiBCA;QAfGA,IAAIA,CAACA,UAAUA,GAAGA,IAAIA,CAACA,iBAAiBA,EAAEA,CAACA;QAE3CA,IAAIA,CAACA,UAAUA,CAACA,EAAEA,CAACA,SAASA,EAAEA;YAC1BA,KAAIA,CAACA,WAAWA,IAAIA,KAAIA,CAACA,WAAWA,EAAEA,CAACA;QAC3CA,CAACA,CAACA,CAACA;QAEHA,IAAIA,CAACA,UAAUA,CAACA,EAAEA,CAACA,SAASA,EAAEA;YAC1BA,KAAIA,CAACA,UAAUA,CAACA,SAASA,CAACA,IAAIA,CAACA,YAAYA,GAAGA,KAAIA,CAACA,cAAcA,EAAEA,CAACA,CAACA;YACrEA,KAAIA,CAACA,WAAWA,IAAIA,KAAIA,CAACA,WAAWA,EAAEA,CAACA;QAC3CA,CAACA,CAACA,CAACA;QAEHA,IAAIA,CAACA,UAAUA,CAACA,EAAEA,CAACA,OAAOA,EAAEA;YACxBA,KAAIA,CAACA,UAAUA,CAACA,GAAGA,EAAEA,CAACA;YACtBA,KAAIA,CAACA,iBAAiBA,EAAEA,CAACA;QAC7BA,CAACA,CAACA,CAACA;IACPA,CAACA;IACLP,cAACA;AAADA,CAACA,AArFD,IAqFC;AArFY,eAAO,GAAP,OAqFZ,CAAA;AAqBD,IAAa,OAAO;IAIhBQ,SAJSA,OAAOA,CAIJA,KAAeA;QAEvBC,IAAIA,CAACA,GAAGA,GAAGA,KAAKA,CAACA,IAAIA,CAACA,UAACA,CAACA,EAAEA,CAACA,IAAKA,OAAAA,CAACA,GAAGA,CAACA,EAALA,CAAKA,CAACA,CAACA,IAAIA,CAACA,GAAGA,CAACA,CAACA;IACrDA,CAACA;IAEDD,wBAAMA,GAANA;QAAWE,MAAMA,CAACA,IAAIA,CAACA,GAAGA,CAACA;IAACA,CAACA;IACjCF,cAACA;AAADA,CAACA,AAVD,IAUC;AAVY,eAAO,GAAP,OAUZ,CAAA;AAED,SAAgB,iBAAiB,CAC7B,MAAa,EACb,iBAAmC,EAAE,OAAgB;IAErDG,MAAMA,CAACA,IAAIA,OAAOA,CAACA,MAAMA,EAAEA,iBAAiBA,EAAEA,OAAOA,CAACA,CAACA;AAC3DA,CAACA;AALe,yBAAiB,GAAjB,iBAKf,CAAA;AAWA"}